(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{40:function(e,t,a){e.exports=a(80)},63:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),o=a(6),s=a(1),i=a(2),u=a(4),m=a(3),h=a(5),p=a(14),d=a.n(p),f=a(23),v=a.n(f),b=a(37),g=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"initialize",value:function(e){var t="BEwx8BZrdoV5Nm6mryR1LgDcvs_xsYgTQ81YYHDLHo-WbZAzZU8O4-nSDZnlhTEX0Z3pe1adWjTA-z-FJAr9epc";function a(){return(a=Object(b.a)(v.a.mark((function a(){var r,c;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Registering serviceWorker..."),a.next=3,navigator.serviceWorker.register("/worker.js",{scope:"/"});case 3:return r=a.sent,console.log("SeviceWorker registered..."),console.log("Registering Push..."),a.next=8,r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n(t)});case 8:return c=a.sent,console.log(c),console.log("Push registered..."),console.log("Sending Push..."),a.next=14,fetch("".concat("https://ve-borrow.herokuapp.com","/subscribe/").concat(e),{method:"POST",body:JSON.stringify(c),headers:{"content-type":"application/json"}});case 14:console.log("Push sent...");case 15:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function n(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}"serviceWorker"in navigator&&function(){return a.apply(this,arguments)}().catch((function(e){return console.error(e)}))}}]),e}(),E=new(function(){function e(){Object(s.a)(this,e),this.auth=d.a.create({baseURL:"https://ve-borrow.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"signup",value:function(e){var t=e.firstName,a=e.lastName,n=e.email,r=e.phoneNumber,c=e.password;return this.auth.post("/auth/signup",{firstName:t,lastName:a,email:n,phoneNumber:r,password:c}).then((function(e){var t=e.data;return(new g).initialize(t._id),t}))}},{key:"login",value:function(e){var t=e.email,a=e.password;return this.auth.post("/auth/login",{email:t,password:a}).then((function(e){var t=e.data;return(new g).initialize(t._id),t}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),w=new(function(){function e(){Object(s.a)(this,e),this.user=d.a.create({baseURL:"".concat("https://ve-borrow.herokuapp.com","/user"),withCredentials:!0})}return Object(i.a)(e,[{key:"getUser",value:function(e){return this.user.get("/".concat(e)).then((function(e){return e.data}))}},{key:"deleteUser",value:function(e){return this.user.delete("/".concat(e),{}).then((function(e){return e.data}))}},{key:"updateUser",value:function(e,t,a,n){return this.user.put("/".concat(e),{firstName:t,lastName:a,phoneNumber:n}).then((function(e){return e.data}))}}]),e}()),N=r.a.createContext(),y=N.Consumer,j=N.Provider,O=function(e){return function(t){function a(){return Object(s.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,t),Object(i.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(y,null,(function(a){var n=a.login,c=a.signup,l=a.logout,o=a.user,s=a.isLoggedIn,i=a.deleteUserAndLogout;return r.a.createElement(e,Object.assign({user:o,isLoggedIn:s,login:n,deleteUserAndLogout:i,signup:c,logout:l},t.props))}))}}]),a}(n.Component)},k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1,user:null,isLoading:!0},a.signup=function(e,t,n,r,c){E.signup({firstName:e,lastName:t,email:n,phoneNumber:r,password:c}).then((function(e){return a.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},a.login=function(e,t){E.login({email:e,password:t}).then((function(e){return a.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},a.logout=function(){E.logout().then((function(){a.setState({isLoggedIn:!1,user:null}),a.props.history.push("/login")})).catch((function(e){return console.log(e)}))},a.deleteUserAndLogout=function(){w.deleteUser(a.state.user._id).then((function(){a.setState({isLoggedIn:!1,user:null}),a.props.history.push("/login")})).catch((function(e){return console.log(e)}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedIn,n=e.user,c=this.login,l=this.logout,o=this.signup,s=this.deleteUserAndLogout;return r.a.createElement(j,{value:{isLoading:t,isLoggedIn:a,user:n,login:c,logout:l,signup:o,deleteUserAndLogout:s}},this.props.children)}}]),t}(r.a.Component),C=(a(63),a(16)),I=O(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.logout,e.isLoggedIn);return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("ul",{id:"nav-mobile"},t?r.a.createElement("div",{className:"loggedIn"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",id:"home-btn"},r.a.createElement("i",{className:"fas fa-home"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/search"},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/notifications"},r.a.createElement("i",{className:"fas fa-envelope-open-text"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/my-vehicles"},r.a.createElement("i",{className:"fas fa-bicycle"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/my-profile"},r.a.createElement("i",{className:"far fa-user"})))):r.a.createElement("div",{className:"loggedIn notLogged"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login ",r.a.createElement("i",{className:"fas fa-sign-in-alt"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/signup"},"Signup ",r.a.createElement("i",{className:"fas fa-user-plus"})))))))}}]),t}(n.Component));var S=function(){return r.a.createElement("div",{className:"row home-card"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:"images/veborrow.png"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"VeBorrow App"),r.a.createElement("p",null,"Imagine that you are in the city and need to go somewhere, but you don\u2019t want to pay the expensive price for underground/bus tickets, or you don\u2019t have any account to rent the public bikes\u2026 If this happens to you, VeBorrow is your solution! VeBorrow is an app where the users can borrow the vehicles from other users, without paying any cost. Also, you can borrow your vehicle to other users that are in the same situation as you."),r.a.createElement("br",null),r.a.createElement("p",null,"Let\u2019s make this world more easy and friendly =)")))))},A=a(15),x=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",email:"",phoneNumber:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.firstName,r=t.lastName,c=t.email,l=t.phoneNumber,o=t.password;a.props.signup(n,r,c,l,o)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(A.a)({},n,r))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.email,c=e.phoneNumber,l=e.password;return r.a.createElement("div",{className:"row signup-page"},r.a.createElement("div",{className:"col s12 m7"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:"images/veborrow.png"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"Firs name",value:t,onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last name",value:a,onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:n,onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"number",name:"phoneNumber",placeholder:"Phone number",value:c,onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:l,onChange:this.handleChange,required:!0}),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"SIGNUP"))))))}}]),t}(n.Component)),L=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;a.props.login(n,r)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(A.a)({},n,r))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"row login-page"},r.a.createElement("div",{className:"col s12 m7"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:"images/veborrow.png"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",name:"email",placeholder:"Email",value:t,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:a,onChange:this.handleChange}),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"LOGIN"," ",r.a.createElement("i",{className:"fas fa-paper-plane"})))))))}}]),t}(n.Component)),V=O(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Private Route"),r.a.createElement("h1",null,"Welcome ",this.props.user.firstName),r.a.createElement("p",null,this.props.user.secondName),r.a.createElement("p",null,this.props.user.phoneNumber),r.a.createElement("p",null,this.props.user.email),r.a.createElement("p",null,this.props.user.owner),r.a.createElement("p",null,this.props.user.borrow),r.a.createElement(o.b,{to:"my-profile"},"PROFILE"))}}]),t}(n.Component)),B=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",phoneNumber:""},a.deleteAccount=function(){a.props.deleteUserAndLogout()},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getUser(this.props.user._id).then((function(t){e.setState({firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber})}))}},{key:"render",value:function(){var e=this.props.logout;return r.a.createElement("div",{className:"row profile-card"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content brown-text"},r.a.createElement("span",{className:"card-title"},"Your Profile"),r.a.createElement("h6",null," Name: ",r.a.createElement("span",null,this.state.firstName," ",this.state.secondName)),r.a.createElement("h6",null," Email: ",r.a.createElement("span",null,this.props.user.email)),r.a.createElement("h6",null," Phone number: ",r.a.createElement("span",null,this.state.phoneNumber))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"waves-effect waves-light btn"},r.a.createElement(o.b,{className:"color-white",to:"/edit-profile"},"Edit")),r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:e},"Logout"),r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:this.deleteAccount},"Delete")))))}}]),t}(n.Component)),U=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:a.props.user.firstName,lastName:a.props.user.lastName,phoneNumber:a.props.user.phoneNumber},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.firstName,r=t.lastName,c=t.phoneNumber,l=a.props.user._id;w.updateUser(l,n,r,c).then((function(){return a.props.history.push("/my-profile")})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(A.a)({},n,r))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.me().then((function(t){var a=t.firstName,n=t.lastName,r=t.phoneNumber;e.setState({firstName:a,lastName:n,phoneNumber:r})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row signup-page"},r.a.createElement("div",{className:"col s12 m7"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:"images/veborrow.png"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"First name"),r.a.createElement("input",{type:"text",name:"firstName",placeholder:"Firs name",value:this.state.firstName,onChange:this.handleChange}),r.a.createElement("label",null,"Last name"),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last name",value:this.state.lastName,onChange:this.handleChange}),r.a.createElement("label",null,"Phone number"),r.a.createElement("input",{type:"text",name:"phoneNumber",placeholder:"Phone number",value:this.state.phoneNumber,onChange:this.handleChange}),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"SAVE ",r.a.createElement("i",{className:"far fa-share-square"})))))))}}]),t}(n.Component)),F=new(function(){function e(){Object(s.a)(this,e),this.vehicles=d.a.create({baseURL:"".concat("https://ve-borrow.herokuapp.com","/vehicles"),withCredentials:!0})}return Object(i.a)(e,[{key:"getAllUserVehicles",value:function(){return this.vehicles.get().then((function(e){return e.data}))}},{key:"getAllAvailableVehicles",value:function(){return this.vehicles.get("/available").then((function(e){return e.data}))}},{key:"createVehicle",value:function(e){return this.vehicles.post("/",{type:e}).then((function(e){return e.data}))}},{key:"deleteOneVehicle",value:function(e){return this.vehicles.delete("/".concat(e)).then((function(e){return e.data}))}},{key:"updateVehicle",value:function(e,t,a,n){return this.vehicles.put("/".concat(e),{available:t,latitude:a,longitude:n}).then((function(e){return e.data}))}},{key:"getOne",value:function(e){return this.vehicles.get("/".concat(e)).then((function(e){return e.data}))}}]),e}()),D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={available:"",inUse:"",longitude:"",latitude:""},a.deleteVehicle=function(){a.props.delete(a.props.vehicle._id)},a.turnOff=function(e,t){F.updateVehicle(e,t,null,null).then((function(e){a.setState({available:e.available,longitude:e.longitude,latitude:e.latitude})})).catch((function(e){return console.log(e)}))},a.turnAvailable=function(e,t){var n="",r="";navigator.geolocation.getCurrentPosition((function(c){n=c.coords.latitude,r=c.coords.longitude,F.updateVehicle(e,t,n,r).then((function(e){a.setState({available:e.available,longitude:e.longitude,latitude:e.latitude})})).catch((function(e){return console.log(e)}))}))},a.updateState=function(e){e.preventDefault();var t=a.props.vehicle._id,n=a.state.available,r=!a.state.available;n?a.turnOff(t,r):a.turnAvailable(t,r)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({available:this.props.vehicle.available,inUse:this.props.vehicle.inUse,longitude:this.props.vehicle.longitude,latitude:this.props.vehicle.latitude})}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m5"},r.a.createElement("div",{className:"card-panel "},r.a.createElement("h5",{className:"brown-text"},this.props.vehicle.type),this.state.inUse?r.a.createElement("p",{className:"brown-text"},"Is in use..."):r.a.createElement("div",{className:"vehicle-buttons"},this.state.available?r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:this.updateState},"Turn OFF ",r.a.createElement("i",{className:"fas fa-toggle-off"})):r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:this.updateState},"Turn ON ",r.a.createElement("i",{className:"fas fa-toggle-on"})),r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:this.deleteVehicle},"Delete ",r.a.createElement("i",{className:"far fa-trash-alt"}))))))}}]),t}(n.Component),P=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={vehicles:[],showForm:!1,type:""},a.getAllVehicles=function(){F.getAllUserVehicles().then((function(e){var t=e;a.setState({vehicles:t})}))},a.deleteVehicle=function(e){F.deleteOneVehicle(e).then((function(){F.getAllUserVehicles().then((function(e){var t=e;a.setState({vehicles:t})}))})).catch((function(e){return console.log(e)}))},a.createNewVehicle=function(e){e.preventDefault(),F.createVehicle(a.state.type).then((function(e){a.setState({type:"",showForm:!1}),a.getAllVehicles()}))},a.handleChange=function(e){var t=document.querySelector('input[name="type"]:checked').value;a.setState({type:t})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAllVehicles()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row vehicles-card"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card"},r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:function(){e.setState({showForm:!e.state.showForm})}}," Create vehicle ",r.a.createElement("i",{className:"far fa-plus-square"})),this.state.showForm&&r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.createNewVehicle},r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{onChange:this.handleChange,name:"type",value:"Bike",type:"radio"}),r.a.createElement("span",null,"Bike"))),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{onChange:this.handleChange,name:"type",value:"Motorcycle",type:"radio"}),r.a.createElement("span",null,"Motorcycle"))),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{onChange:this.handleChange,name:"type",value:"Scooter",type:"radio"}),r.a.createElement("span",null,"Scooter"))),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{onChange:this.handleChange,name:"type",value:"Electric scooter",type:"radio"}),r.a.createElement("span",null,"Electric Scooter"))),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{onChange:this.handleChange,name:"type",value:"Car",type:"radio"}),r.a.createElement("span",null,"Car"))),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"Add"))),this.state.vehicles.map((function(t){return r.a.createElement(D,{key:t._id,vehicle:t,delete:e.deleteVehicle})})))))}}]),t}(n.Component)),_=a(20),M={width:"90vw",height:"65vh"},R=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={latitude:41.397618,longitude:2.190161,availableVehicles:[]},a.showAllAvailableVehicles=function(){F.getAllAvailableVehicles().then((function(e){a.setState({availableVehicles:e})})).catch((function(e){return console.log(e)}))},a.showVehicleInfo=function(e){a.props.info(e)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.showAllAvailableVehicles()}},{key:"render",value:function(){var e=this;return r.a.createElement(_.Map,{google:this.props.google,zoom:16,style:M,initialCenter:{lat:this.state.latitude,lng:this.state.longitude}},this.state.availableVehicles.map((function(t){return r.a.createElement(_.Marker,{key:t._id,position:{lat:Number(t.latitude),lng:Number(t.longitude)},onClick:function(){return e.showVehicleInfo(t._id)}})})))}}]),t}(n.Component),q=Object(_.GoogleApiWrapper)({apiKey:"AIzaSyBzxZbG4XV0JEO9WSh4SxMH-d1EAkr6Kts"})(R),T=new(function(){function e(){Object(s.a)(this,e),this.borrows=d.a.create({baseURL:"".concat("https://ve-borrow.herokuapp.com","/borrow"),withCredentials:!0})}return Object(i.a)(e,[{key:"create",value:function(e,t,a){return this.borrows.post("/",{ownerId:e,vehicleId:t,message:a}).then((function(e){return e.data}))}},{key:"get",value:function(){return this.borrows.get().then((function(e){return e.data}))}},{key:"returnVehicle",value:function(e,t,a,n){return this.borrows.put("/completed/".concat(e),{vehicleId:t,latitude:a,longitude:n}).then((function(e){return e.data}))}},{key:"acceptBorrow",value:function(e,t){return this.borrows.put("/accepted/".concat(e),{vehicleId:t}).then((function(e){return e.data}))}},{key:"rejectBorrow",value:function(e){return this.borrows.put("/rejected/".concat(e)).then((function(e){return e.data}))}}]),e}()),W=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={type:"",ownerName:"",showMessageForm:!1,message:""},a.hideInfo=function(e){e.preventDefault(),a.props.hide()},a.borrowIt=function(e){e.preventDefault();var t=a.state.message;a.props.borrow(t)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(A.a)({},n,r))},a.completeForm=function(e){e.preventDefault(),a.setState({showMessageForm:!0})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({type:this.props.vehicle.type,ownerName:this.props.vehicle.ownerName})}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.vehicle.ownerId===this.props.user._id?r.a.createElement("div",null,r.a.createElement("h3",null,"Your vehicle"),r.a.createElement("p",null,"Type of vehicle: ",this.state.type)):r.a.createElement("div",null,r.a.createElement("h5",null,this.state.type),r.a.createElement("p",null,"Owner: ",this.state.ownerName),this.state.showMessageForm?r.a.createElement("div",null,r.a.createElement("label",null,"How many time you need it more or less?"),r.a.createElement("input",{type:"text",name:"message",value:this.state.message,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("div",{className:"borrow"},r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:this.hideInfo},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:this.borrowIt},"Accept"))):r.a.createElement("div",{className:"borrow"},r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:this.hideInfo},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:this.completeForm},"Borrow"))))}}]),t}(n.Component)),z=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showInfo:!1,type:"",vehicleId:"",ownerName:"",ownerId:""},a.showInfo=function(e){F.getOne(e).then((function(e){a.setState({showInfo:!0,type:e.type,vehicleId:e._id,ownerName:e.ownerId.firstName,ownerId:e.ownerId._id})})).catch((function(e){return console.log(e)}))},a.hideInfo=function(){a.setState({showInfo:!1})},a.borrowTheVehicle=function(e){var t=a.state.ownerId,n=a.state.vehicleId;T.create(t,n,e).then((function(){a.props.history.push("/notifications")})).catch((function(e){return console.log(e)}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row profile-card"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content brown-text"},r.a.createElement("span",{className:"card-title"},"Search a vehicle"),this.state.showInfo&&r.a.createElement("div",null,r.a.createElement(W,{vehicle:{type:this.state.type,ownerName:this.state.ownerName,ownerId:this.state.ownerId},hide:this.hideInfo,borrow:this.borrowTheVehicle})))))),r.a.createElement("div",{className:"map"},r.a.createElement(q,{info:this.showInfo})))}}]),t}(n.Component)),Y=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).acceptBorrow=function(e){e.preventDefault(),a.props.accepted()},a.rejectBorrow=function(e){e.preventDefault(),a.props.rejected()},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content brown-text"},r.a.createElement("span",{className:"card-title"},this.props.borrow.vehicleId.type),r.a.createElement("p",{className:"brown-text"},"Renter name: ",this.props.borrow.renterId.firstName),r.a.createElement("p",{className:"brown-text"},"Message: ",this.props.borrow.message)),r.a.createElement("div",{className:"card-action"},this.props.borrow.accepted?r.a.createElement("div",null,this.props.borrow.completed?r.a.createElement("p",{className:"brown-text"},"Finished!!"):r.a.createElement("p",{className:"brown-text"},"In use...")):r.a.createElement("div",null,this.props.borrow.rejected?r.a.createElement("p",{className:"brown-text"},"Rejected"):r.a.createElement("div",null,r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:this.acceptBorrow},"Accept ",r.a.createElement("i",{className:"far fa-check-square"})),r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:this.rejectBorrow},"Reject ",r.a.createElement("i",{className:"fas fa-ban"}))))))))}}]),t}(n.Component)),Z=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).completeBorrow=function(e){e.preventDefault(),a.props.completed()},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content brown-text"},r.a.createElement("span",{className:"card-title"},this.props.borrow.vehicleId.type),r.a.createElement("p",{className:"brown-text"},"Owner name: ",this.props.borrow.ownerId.firstName),r.a.createElement("p",{className:"brown-text"},"Your message: ",this.props.borrow.message)),r.a.createElement("div",{className:"card-action"},this.props.borrow.accepted?r.a.createElement("div",null,this.props.borrow.completed?r.a.createElement("p",{className:"brown-text"},"Finished!!"):r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:this.completeBorrow},"Return ",r.a.createElement("i",{className:"far fa-hand-point-right"}))):r.a.createElement("div",null,this.props.borrow.rejected?r.a.createElement("p",{className:"brown-text"},"Rejected"):r.a.createElement("p",{className:"brown-text"},"Pending..."))))))}}]),t}(n.Component)),J=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).acceptBorrow=function(){var e=a.props.borrow._id,t=a.props.borrow.vehicleId._id;T.acceptBorrow(e,t).then((function(){return a.props.refreshPage()})).catch((function(e){return console.log(e)}))},a.rejectBorrow=function(){var e=a.props.borrow._id;T.rejectBorrow(e).then((function(){return a.props.refreshPage()})).catch((function(e){return console.log(e)}))},a.completeBorrow=function(){var e=a.props.borrow._id,t=a.props.borrow.vehicleId._id,n="",r="";navigator.geolocation.getCurrentPosition((function(c){n=c.coords.latitude,r=c.coords.longitude,T.returnVehicle(e,t,n,r).then((function(){return a.props.refreshPage()})).catch((function(e){return console.log(e)}))}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.borrow.ownerId._id===this.props.user._id?r.a.createElement(Y,{borrow:this.props.borrow,accepted:this.acceptBorrow,rejected:this.rejectBorrow}):r.a.createElement(Z,{borrow:this.props.borrow,completed:this.completeBorrow}))}}]),t}(n.Component)),G=O(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={borrows:[]},a.refresh=function(){T.get().then((function(e){a.setState({borrows:e})})).catch((function(e){return console.log(e)}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row vehicles-card"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card"},0===this.state.borrows.length?r.a.createElement("div",{className:"card-content brown-text"},r.a.createElement("span",{className:"card-title"},"You don't have notifications yet...")):r.a.createElement("div",null,this.state.borrows.map((function(t){return r.a.createElement(J,{key:t._id,borrow:t,refreshPage:e.refresh})}))))))}}]),t}(n.Component)),H=a(19);var K=O((function(e){var t=e.component,a=e.isLoggedIn,n=Object(H.a)(e,["component","isLoggedIn"]);return r.a.createElement(C.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(C.a,{to:"/"}):a?void 0:r.a.createElement(t,e)}}))}));var X=O((function(e){var t=e.component,a=e.isLoggedIn,n=Object(H.a)(e,["component","isLoggedIn"]);return r.a.createElement(C.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):a?void 0:r.a.createElement(C.a,{to:"/login"})}}))})),Q=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(I,null),r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/",component:S}),r.a.createElement(K,{exact:!0,path:"/signup",component:x}),r.a.createElement(K,{exact:!0,path:"/login",component:L}),r.a.createElement(X,{exact:!0,path:"/private",component:V}),r.a.createElement(X,{exact:!0,path:"/my-profile",component:B}),r.a.createElement(X,{exact:!0,path:"/edit-profile",component:U}),r.a.createElement(X,{exact:!0,path:"/my-vehicles",component:P}),r.a.createElement(X,{exact:!0,path:"/search",component:z}),r.a.createElement(X,{exact:!0,path:"/notifications",component:G})))}}]),t}(n.Component);l.a.render(r.a.createElement(o.a,null,r.a.createElement(k,null,r.a.createElement(Q,null))),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4023d8f7.chunk.js.map